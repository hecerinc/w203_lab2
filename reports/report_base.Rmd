---
title: "Effects of gas prices and other economic indicators on presidential approval"
author: "Malay Patel, Young Hoon Kim, Hector Rincon"
date: "12/1/2021"
output: pdf_document
---

## Introduction
```{r include=FALSE}
require(dplyr)
require(data.table)
require(lubridate)
require(zoo)
require(tidyverse)
require(ggplot2) 
require(sandwich)
require(stargazer)
require(patchwork) # To display 2 charts together
require(hrbrthemes)
options(max.print = 999999999)
```


If it’s possible to sum up a presidency in a single number, that number would be the president’s approval rating — or the share of Americans who approve of the job he’s doing. Arguably, that simple percentage can determine the fate of an entire presidency.

For instance, a high approval rating can marshal support for a president’s agenda and minimize his party’s losses in the midterm elections — not to mention help the president himself win reelection. But a low approval rating can be electoral poison and imply that a president has lost the mandate to govern entirely.

https://fivethirtyeight.com/features/how-were-tracking-joe-bidens-approval-rating/

## Research Design & Data

The main focus of this study is to answer following question:

**What is the effect of the gas price fluctuation on the current presidential approval rating?**

This study will focus solely on the United States. As such, any results are valid only in the specific context of American political life. The implications of these findings are of paramount importance to all levels of actors in the political sphere. From campaign managers to party leadership to political activitists, the role economic factors play in presidential approval is an important, critical knob that all parties can intervene to further political agendas and projects.

### Data

In this section we describe the different datasets and variables of interest we consider for this study.

All economic data is sourced from the [St. Louis FRED](https://fred.stlouisfed.org/). 

```{r include=FALSE}
load('../data/interim/df_minus_events.RData') # TODO: change this to /processed
```

#### Unemployment rate

The unemployment rate is published monthly by the U.S. Bureau of Labor Statistics, with adjustment for seasonality and is defined as

> ...the number of unemployed as a percentage of the labor force. Labor force data are restricted to people 16 years of age and older, who currently reside in 1 of the 50 states or the District of Columbia, who do not reside in institutions (e.g., penal and mental facilities, homes for the aged), and who are not on active duty in the Armed Forces.

Under the logic of the current study, unemployment rate is one of the measures we consider as "lived economy" for the average American citizen. As previously mentioned, economic indicators like the GDP and the trade deficit are hard to grasp concepts, but employment &mdash; or lack thereof &mdash; is an immediately perceivable and highly impacting variable in people's day to day lives. We would expect that increasing unemployment rates will have a negative effect on approval rates for the president in office.

We will note the low resolution of this data. Since this is only published monthly, we do not have the same level of resolution as the more frequently conducted approval polls data. Given the number of observations (240 months in the past 20 years), we do not think this will significantly impact results. (==TODO: CONFIRM==) Because of this, we have decided to replicate the monthly figure for all days in the month to correlate with the daily value of approval.

The U.S. BLS has data going back to 1948, and we have restricted ourselves to the monthly percentage reported for the period of interest.

==EDA HERE==
```{r}
## Unemployment + approval rating
uc_coef <- mean(df$approval, na.rm = TRUE) / mean(df$unrate, na.rm = TRUE)
unr.ap <- df %>%
  ggplot() +
  aes(x = date) +
  geom_line(aes(y = unrate, color = 'unrate')) +
  geom_line(aes(y = approval/uc_coef, color = 'approval')) +
  scale_y_continuous(

    # Features of the first axis
    name = "Unemployment Rate",

    # Add a second axis and specify its features
    sec.axis = sec_axis(~.*uc_coef, name="approval")
  ) +
  scale_color_manual(name = "variables", values = c("unrate" = "red", "approval" = "darkorange")) +
  labs(
    title = 'Unemployment rate & approval rating trends'
  )

unr.ap
```

#### Crude oil prices (WTI)

Our main variable of interest is gasoline prices. Gasoline prices are probably the most immediate way that the average consumer experiences the economy in "real time". Given the sensitivity of gas prices to global economic shifts/policy, and the relative elasticity of the good, consumers' bottom lines are hit most immediately by the big red number they find at their nearest gas station. We therefore expect an increase in crude oil prices (as measured by WTI) to have a negative impact on presidential approval as well.

##### Data

We have used in this study the reported trading price of the West Texas Intermediate (WTI) as a proxy for gasoline prices. This variable is highly correlated to the actual gas price that consumers pay, as most gasoline in the U.S. is refined from West Texas crude oil. Moreover, the WTI price is "the main oil benchmark for North America" (Investopedia, 2020) and is widely used in the financial industry as a price for the commodity.

This data is published daily by the U.S. Energy Information Administration (EIA) in U.S. dollars per barrel. Since the markets are closed on weekends these prices are actually published only during the weekdays. Given this limitation, we have decided to reuse the Friday value for Saturday and Sunday to maintain the daily resolution of our approval polls data.


==EDA HERE==
```{r}
## Approval rating vs gas
arg.coef <- mean(df$gas, na.rm = TRUE) / mean(df$approval, na.rm = TRUE)
ar.g <- df %>%
  ggplot() +
  aes(x = date) +
  geom_line(aes(y = approval, color = 'approval')) +
  geom_line(aes(y = gas/arg.coef, color = 'gas')) +
  scale_y_continuous(

    # Features of the first axis
    name = "approval",

    # Add a second axis and specify its features
    sec.axis = sec_axis(~.*arg.coef, name="gas price")
  ) +
  scale_color_manual(name = "variables", values = c("approval" = "darkblue", "gas" = "darkred")) +
  labs(
    title = 'Approval rating vs gas price trend comparison'
  )
ar.g
```

#### Food and beverage prices (CPI)

Our other main variable representing the lived economy of consumers is the price of food and beverages. We contend that the other place where average consumers across all income levels most immediately feel the effects of the economy is at the supermarket. (TODO: maybe cite a study here). We have operationalized this concept using the Food & Beverage component of the Consumer Price Index (CPI), reported monthly by the U.S. Bureau of Labor Statistics in a seasonally adjusted fashion. 

Similar to unemployment rate, since this value is published at a month-only resolution, we have decided to utilize the monthly value (published at the beginning of the following month) replicated across all days of that month to match the daily resolution of approval poll data.

We expect again a negative effect on presidential approval as food and beverage prices increase. This is because people are increasingly dissatisfied with federal administration when they cannot purchase the same goods or are having trouble feeding their families or themselves.



==EDA HERE==
```{r}
## Unemployment + CPI
uc_coef <- mean(df$cpi, na.rm = TRUE) / mean(df$unrate, na.rm = TRUE)
unr.cpi <- df %>%
  ggplot() +
  aes(x = date) +
  geom_line(aes(y = unrate, color = 'unrate')) +
  geom_line(aes(y = cpi/uc_coef, color = 'cpi')) +
  scale_y_continuous(

    # Features of the first axis
    name = "Unemployment Rate",

    # Add a second axis and specify its features
    sec.axis = sec_axis(~.*uc_coef, name="CPI")
  ) +
  scale_color_manual(name = "variables", values = c("unrate" = "red", "cpi" = "darkorange")) +
  labs(
    title = 'Unemployment rate & CPI trends'
  )
## CPI + approval rating
ca_coef <- mean(df$approval, na.rm = TRUE) / mean(df$cpi, na.rm = TRUE)
cpi.ap <- df %>%
  ggplot() +
  aes(x = date) +
  geom_line(aes(y = cpi, color = 'cpi')) +
  geom_line(aes(y = approval/ca_coef, color = 'approval')) +
  scale_y_continuous(

    # Features of the first axis
    name = "CPI",

    # Add a second axis and specify its features
    sec.axis = sec_axis(~.*ca_coef, name="approval")
  ) +
  scale_color_manual(name = "variables", values = c("cpi" = "darkorange", "approval" = "darkblue")) +
  labs(
    title = 'CPI & approval rating trends'
  )

unr.cpi
cpi.ap
```

#### Event data
==EDA HERE==
```{r}
# ## COVID graph
# cov_coef <- 325
# cov.g <- df %>%
#   ggplot() +
#   aes(x = date) +
#   geom_line(aes(y = new_covid_cases, color = 'new_covid_cases')) +
#   geom_line(aes(y = total_covid_cases/cov_coef, color = 'total_covid_cases')) +
#   scale_y_continuous(
# 
#     # Features of the first axis
#     name = "new_covid_cases",
# 
#     # Add a second axis and specify its features
#     sec.axis = sec_axis(~.*cov_coef, name="total_covid_cases")
#   ) +
#   scale_color_manual(name = "variables", values = c("total_covid_cases" = "darkgray", "new_covid_cases" = "darkgreen")) +
#   labs(
#     title = 'COVID cases trend (total + new)'
#   )
# ## total vs approval
# ta_coef <- 0.00000125
# cov_t.ap <- df %>%
#   ggplot() +
#   aes(x = date) +
#   geom_line(aes(y = total_covid_cases, color = 'total_covid_cases')) +
#   geom_line(aes(y = approval_rating/ta_coef, color = 'approval_rating')) +
#   scale_y_continuous(
# 
#     # Features of the first axis
#     name = "total_covid_cases",
# 
#     # Add a second axis and specify its features
#     sec.axis = sec_axis(~.*ta_coef, name="approval_rating")
#   ) +
#   scale_color_manual(name = "variables", values = c("total_covid_cases" = "darkgray", "approval_rating" = "darkblue")) +
#   labs(
#     title = 'total COVID cases & approval rating trends'
#   )
# 
# ## new vs approval
# na_coef <- 0.000325
# cov_n.ap <- df %>%
#   ggplot() +
#   aes(x = date) +
#   geom_line(aes(y = new_covid_cases, color = 'new_covid_cases')) +
#   geom_line(aes(y = approval_rating/na_coef, color = 'approval_rating')) +
#   scale_y_continuous(
# 
#     # Features of the first axis
#     name = "new_covid_cases",
# 
#     # Add a second axis and specify its features
#     sec.axis = sec_axis(~.*na_coef, name="approval_rating")
#   ) +
#   scale_color_manual(name = "variables", values = c("new_covid_cases" = "darkgreen", "approval_rating" = "darkblue")) +
#   labs(
#     title = 'new COVID cases & approval rating trends'
#   )
# 
# cov.g
# cov_t.ap
# cov_n.ap
```


### Model 1 (Approval rating vs gas price)
```{r}
m1 <- lm(approval_rating ~ gas, df)
summary(m1)
```

### Model 2 (Approval rating vs gas + economic variables)
```{r}
m2 <- lm(approval_rating ~ gas + unrate + cpi, df)
summary(m2)
```

### Model 3 (Approval rating vs gas + economic variables + event variables)
```{r}
m3 <- lm(approval_rating ~ gas + unrate + cpi + log(total_covid_cases) + log(new_covid_cases), df)
summary(m3)
```

## Results

## Discussion

### Generalizability

### Significance

### LSM assumptions

We have fairly large sample size (> 100 rows) of data in our collected sample, hence we evaluated the Large Sample Model assumptions: 

####IID

We have taken the data from FiveThirtyEight who moderates and collects data from various pollsters who inherently run these surveys with American to record their responses for presidential approval ratings. Additionally, FiveThirtyEight ensures to negate any hour effect to eliminate biases. The randomness of the survey participant selection indicates that the collected data would meet IID requirements.

### Unique BLP exists

The sample size is significantly higher than 30 and Central Limit Theorem (CLT) would apply. Also, there seems to be no multi-collinearity among the variables which was also evident during modeling. Hence, we can say that we would meet the sufficient conditions for meeting existence of unique BLP.

## Limitations


### Omitted Variable Bias

The causal relationship that we have attempted to establish in our model was the effect of gas price fluctuations on current president’s approval ratings. We also identified additional co-variates and modeled their impact on the outcome variable. Now, let's look at some of the variables that we may have omitted but could introduce bias in terms of effects on the coefficients for the variables we have considered.

#### Immigration 

We can reason that `immigration` could be an omitted variable in this causal analysis which could introduce severe bias if included in the regression model. `Immigration` can be measured in-terms of net immigration into the United States which is also dependent on the ongoing Covid-19 restrictions on entry from various countries and also constrained operation of the consulates in host countries. There also exists illegal immigration through boarders for which official accounts do not exists.

**True Model       :** $$\text{approval\_rating} = \beta_0 + \beta_1 \text{gas\_price} + \beta_2 \text{cpi} + \beta_3 \text{unemployment\_rate} + \beta_4 \text{immigration}$$

**Approximate Model    :** $$\text{approval\_rating} = \tilde{\beta}_0 + \tilde{\beta}_1 \text{gas\_price} + \tilde{\beta}_2 \text{cpi} + \tilde{\beta}_3 \text{unemployment\_rate}$$

We won't be able to accurately calculate the effect because of unavailability of accurate and accountable data on `immigration`, however we will try to speculate the effect of `immigration` coefficient and direction of bias with the other co-variates based on our domain knowledge.

First, let's see how `immigration` directly affect our outcome variable `approval_rating`. Immigration is a sensitive topic in the country today and with Covid-19 affecting the GDP and people's earning power across the spectrum, there is undoubtedly a sentimental vibe against immigration across a segment of population. As the government sways towards a liberal immigration policy, it may have a negative impact on the `approval rating`. Hence, we can speculate that the coefficient of immigration as a co-variate ($\beta_4$) in regression equation will have `negative` effect on outcome variable. Immigrants, at least the undocumented ones, are not tracked by government agencies for their (un)employment rate hence may not have effect on the co-variate `unemployment_rate`. Also, there is no clear evidence that immigration may be affecting the `gas_price` which is mostly influenced by government policies and supply~demand ratio. However, immigration may have statistically significant impact on farming and food prices. It is a known fact that undocumented immigrants constitute a considerable workforce as seasonal farm workers and other low paying jobs in food economy. Unavailability of these low cost seasonal labor often result in increased produce cost for citizen, and that drives the `cpi` higher, so the coefficient ($\delta_1$) will most likely be `negative`. The Omitted Variable Bias (OVB) for `cpi` ($\tilde{\beta}_2 - {\beta}_2$) will be `positive` in this case and the direction of omitted variable biases here would be **away from zero**.

![Direction Analysis for OVB: cpi](./Image01_OVB_Immigration.png)

#### Natural Disasters

We can reason that `Natural Disasters` could be an omitted variable in this causal analysis which could introduce severe bias if included in the regression model. `Natural Disasters` could create an indirect effect on approval rating as it tends to frustrate people on the situation they are put in, and often best effort by government fall short of making up for the loss people incur. Also, natural disasters like forest fires creates direct impact on local farming industry and that temporarily drives the food prices up.

**True Model       :** $$\text{approval\_rating} = \beta_0 + \beta_1 \text{gas\_price} + \beta_2 \text{cpi} + \beta_3 \text{unemployment\_rate} + \beta_4 \text{natural\_disaster}$$

**Approximate Model    :** $$\text{approval\_rating} = \tilde{\beta}_0 + \tilde{\beta}_1 \text{gas\_price} + \tilde{\beta}_2 \text{ cpi } + \tilde{\beta}_3 \text{unemployment\_rate}$$

We won't be able to accurately calculate the effect because of unavailability of accurate and measurable data on `natural_disaster`, however we will try to speculate the effect of coefficient and direction of bias with the other co-variates based on our best judgement.

Natural disasters creates imbalances in people's life and people often blame the government in failing to take care of them which in short term may drag the approval ratings down. If it could be quantified by data then it would possibly be a `negative` coefficient ($\beta_4$) when regressed with our outcome variable `approval_rating`. Also, it would have omitted variable bias with `cpi`. Natural disasters often temporarily stalls the local economy and supply chain which drives the food prices high, so the coefficient ($\delta_1$) will most likely be `positive`. The Omitted Variable Bias (OVB) for `cpi` ($\tilde{\beta}_2 - {\beta}_2$) will be `negative` and the direction of omitted variable biases here could be **away from zero**.

![Direction Analysis for OVB: cpi](./Image01_OVB_Immigration.png)


## Conclusion

## References




- U.S. Energy Information Administration, Crude Oil Prices: West Texas Intermediate (WTI) - Cushing, Oklahoma [DCOILWTICO], retrieved from FRED, Federal Reserve Bank of St. Louis; https://fred.stlouisfed.org/series/DCOILWTICO, December 1, 2021.
- U.S. Bureau of Labor Statistics, Unemployment Rate [UNRATE], retrieved from FRED, Federal Reserve Bank of St. Louis; https://fred.stlouisfed.org/series/UNRATE, December 4, 2021.
- U.S. Bureau of Labor Statistics, Consumer Price Index for All Urban Consumers: Food and Beverages in U.S. City Average [CPIFABSL], retrieved from FRED, Federal Reserve Bank of St. Louis; https://fred.stlouisfed.org/series/CPIFABSL, December 5, 2021.
